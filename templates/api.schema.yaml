$schema: http://json-schema.org/draft-04/schema#
title: Panda Sky CloudFormation Config
description: Config for generating a Panda Sky CloudFormation template

type: object
required:
  - name
  - env
  - projectID
  - policyName
  - rootResource
  - resources
  - environmentVariables
  - aws
properties:
  name:
    type: string
  env:
    type: string
  projectID:
    type: string
  policyName:
    type: string
  policyDocument:
    type: object
  roleName:
    type: string
  rootResource: {$ref: "#/definitions/resource"}
  resources:
    type: object
    additionalProperties: {$ref: "#/definitions/resource"}
  schema:
    type: object
  aws:
    type: object

definitions:
  refOrFn:
    description: Verbatim YAML that defines either a 'Ref' or a 'Fn::GetAtt'
    type: string
  resource:
    type: object
    properties:
      parentID: {$ref: "#/definitions/refOrFn"}
      gateway:
        type: object
        required:
          - name
          - resourceID
        properties:
          name:
            type: string
          resourceID: {$ref: "#/definitions/refOrFn"}
  method:
    type: object
    required:
      - name
      - gateway
      - lambda
      - IntegrationResponses
      - MethodResponses
